<!-- https://www.discovermeteor.com/blog/spacebars-secrets-exploring-meteor-new-templating-engine/ -->
<template name="characterTableWrapper">
  <table>
    <thead>
      <tr>
        <td>Character</td> <!-- will list name & short description (Level 3 Paladin) -->
        <td>Edit</td>
				<td>View</td>
      </tr>
    </thead>
    <tbody>
      {{> UI.contentBlock}}
    </tbody>
  </table>
</template>

<template name="manageCharacter">
	<div class="container" style="margin-top: 130px;">

		<h2>Manage Character</h2>
		<div class="row">
			<div class="col-md-12">
				<form class="form-horizontal create-character" role="form">
					<div class="form-group" style="margin-bottom: 60px;">
						<div class="col-sm-12 col-md-6">

							<h5>Overview</h5>
							<div class="row">
								<div class="col-sm-5">
									<label>Name</label>
									<input type="text" name="charname" class="form-control" value="{{name}}" tabindex=1>
								</div>

								<div class="col-sm-4">
									<label>Class</label>
									<select name="class" class="form-control" tabindex=2>
										{{#each standardized 'classes'}} <option {{selected ../class this}}>{{this}}</option> {{/each}}
									</select>
								</div>

								<div class="col-sm-3">
									<label>Level</label>
									<input type="text" name="level" class="form-control" placeholder="0" tabindex=3 value="{{level}}">
								</div>
							</div>

							<div class="row" style="margin-top: 20px;">
								<div class="col-sm-4">
									<label>Background</label>
									<select name="background" class="form-control" tabindex=4>
										{{#each standardized 'backgrounds'}} <option {{selected ../background this}}>{{this}}</option> {{/each}}
									</select>
								</div>

								<div class="col-sm-4">
									<label>Race</label>
									<select name="race" class="form-control" tabindex=5>
										{{#each standardized 'races'}} <option {{selected ../race this}}>{{this}}</option> {{/each}}
									</select>
								</div>

								<div class="col-sm-4">
									<label>Alignment</label>
									<select name="alignment" class="form-control" tabindex=6>
										{{#each standardized 'alignments'}} <option {{selected ../alignment this}}>{{this}}</option> {{/each}}
									</select>
								</div>
							</div>

							<div class="fullwidthline" style="margin: 50px 0 40px;"></div>

							<h5>Physical</h5>
							<div class="row">
								<div class="col-sm-4">
									<label>Armor Class</label>
									<input type="text" name="ac" class="form-control" tabindex=15 value="{{ac}}">
								</div>

								<div class="col-sm-4">
									<label>Initiative</label>
									<input type="text" name="initiative" class="form-control" tabindex=16 value="{{initiative}}">
								</div>

								<div class="col-sm-4">
									<label>Speed</label>
									<input type="text" name="speed" class="form-control" tabindex=17 value="{{speed}}">
								</div>
							</div>

							<div class="row" style="margin-top: 20px;">
								<div class="col-sm-4">
									<label>Hit Points</label>
									<input type="text" name="hitpoints" class="form-control" tabindex=18 value="{{hitPoints}}">
								</div>

								<div class="col-sm-4">
									<label>Hit Dice</label>
									<input type="text" name="hitdice" class="form-control" tabindex=19 value="{{hitDice}}">
								</div>
							</div>

							<div class="fullwidthline" style="margin: 40px 0 30px;"></div>

							<h5>Weapons</h5>
							<div class="row">
								{{#each weapons}}
								<div class="weapon">
									<div class="col-sm-4">
										<label>Name</label>
										<input type="text" class="weapon-input form-control" data-weapon-index="0" value="{{name}}">
									</div>
									<div class="col-sm-3">
										<label>Atk Bonus</label>
										<input type="text" class="weapon-input form-control" data-weapon-index="1" value="{{atkbonus}}">
									</div>
									<div class="col-sm-5">
										<label>Damage</label>
                    <div class="input-group delete-weapon">
										  <input type="text" class="weapon-input form-control" data-weapon-index="2" value="{{damage}}">
                      <span class="input-group-addon"><i class="fa fa-minus"></i></span>
                    </div>
									</div>
								</div>
                <hr class="spacer20">
								{{/each}}

                <hr class="spacer20">
                <div class="col-md-12">
                  <button class="btn btn-success add-weapon">Add</button>
                </div>
							</div>

							<div class="fullwidthline" style="margin: 40px 0 30px;"></div>


							<h5>Equipment, etc.</h5>
							<div class="row">
								<div class="col-sm-12">
									<label>Equipment</label>
									<textarea class="form-control" name="equipment" rows="6" style="resize: vertical;" value="{{equipment}}"></textarea>
								</div>
							</div>
						</div>

						<hr class="spacer60 visible-sm visible-xs">

						<div class="col-sm-12 col-md-6 general-proficiencies" style="padding-left: 50px;">
							<h5>Skills &amp; Proficiencies</h5>

							<div class="row">
								<div class="col-sm-6">
									<label>Proficiency Bonus</label>
									<input type="text" name="proficiency" class="form-control" tabindex=7 value="{{addMod proficiency}}">
								</div>

								<div class="col-sm-6">
									<label>Passive Perception</label>
                  <!-- TODO: broken -->
									<input type="text" name="passive-percep" class="form-control" tabindex=8 value="{{passivePerception}}">
									<span class="instruction">10 + Perception Modifier.</span>
								</div>
							</div>

							<div class="row" style="margin-top: 25px;">
								<div class="col-sm-12 ability-scores">
									<label>Ability Scores</label>
									<div class="row">
										{{#each standardized 'abilityScores'}}
										<div class="col-md-6">
											<div class="input-group input-group-sm" style="width: 100%;">
												<span class="input-group-addon fixed fat">{{abbrev}}</span>
												<input type="text" data-score-index="{{index}}" class="form-control ability" value="{{getArrayValue ../abilityScores index}}">
				  							<span class="base-modifier input-group-addon fixed thin">{{getArrayValue ../abilityModifiers index}}</span>
											</div>
										</div>
										{{/each}}
									</div>
								</div>
							</div>

							<div class="row" style="margin-top: 25px;">
								<div class="col-sm-12 saving-throws">
									<label>Saving Throws</label>
									<div class="row">
										{{#each standardized 'saveProficiencies'}}
										<div class="col-sm-6 col-md-6">
											<div class="input-group input-group-sm">
												<span class="input-group-addon fixed prof-name">{{name}}</span>
												<span data-score-index="{{index}}" class="input-group-addon fixed">{{isProficient ../abilityModifiers index ../proficiency ../proficiencies name}}</span>
													<span class="input-group-addon fixed thin">
													<input type="checkbox" {{checkProficiency ../proficiencies name}} data-add-proficiency-to="{{name}}" class="save-proficiency">
												</span>
											</div>
										</div>
										{{/each}}
									</div>
								</div>
							</div>

							<div class="row" style="margin-top: 25px;">
								<div class="col-sm-12 general-proficiencies">
									<label>Skill Proficiencies</label>
									<div class="row">
										{{#each standardized 'skillProficiencies'}}
										<div class="col-sm-6 col-md-6">
											<div class="input-group input-group-sm">
												<span class="input-group-addon fixed prof-name">{{name}} ({{attribute}})</span>
												<span data-score-index="{{index}}" class="input-group-addon prof-num fixed">{{isProficient ../abilityModifiers index ../proficiency ../proficiencies name}}</span>
													<span class="input-group-addon fixed thin">
													<input type="checkbox" {{checkProficiency ../proficiencies name}} data-add-proficiency-to="{{name}}" class="gen-proficiency">
												</span>
											</div>
										</div>
										{{/each}}
									</div>
								</div>
							</div>

						</div>
					</div>

					<div class="fullwidthline"></div>
					<hr class="spacer30">

					<h5>Features &amp; Traits</h5>

					<div class="form-group" style="margin-top: 0; padding-top; 0;">
						<div id="traits">
							{{#each traits}}
							<!-- TODO: Implement delete button  -->
								<div class="col-sm-6 col-md-4 trait">
									<div class="row">
										<div class="col-sm-12">
											<div class="input-group">
												<span class="input-group-addon"><i class="fa fa-file-o"></i></span>
												<input type="text" class="trait-name form-control" placeholder="Feature Name" value="{{name}}">
											</div>
										</div>
									</div>

									<div class="row" style="margin-top: 20px;">
										<div class="col-sm-12">
											<textarea class="form-control trait-description" rows="5" style="resize: vertical;" placeholder="Description" value="{{description}}"></textarea>
										</div>
									</div>
								</div>
							{{/each}}
						</div>

						<div class="col-sm-4 col-md-2 add-feat-trait">
							<div class="add-box">
								<i class="fa fa-plus fa-2x"></i>
								<span class="add">Add</span>
							</div>
						</div>
					</div>

					<div class="form-group" style="margin-top: 50px;">
						<div class="col-sm-12">
							<button type="submit" class="btn btn-success"><i class="fa fa-thumbs-o-up"></i>&nbsp; Update</button> &nbsp;
							<button class="btn btn-danger delete-character"><i class="fa fa-close"></i>&nbsp; Delete</button>
						</div>
					</div>

					<hr class="spacer50">
				</form>
			</div>
		</div>
	</div>
</template>
